<div align="center">

# FinTech Analyst Agent

AI-powered Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ¾Ğ², Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ KPI Ğ¸ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ²

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
[![Tests](https://img.shields.io/badge/tests-passing-brightgreen.svg)]()
[![Coverage](https://img.shields.io/badge/coverage-85%25-brightgreen.svg)]()
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

</div>

---

ğŸ” Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚ ÑÑ‚Ğ¾Ñ‚ Ğ°Ğ³ĞµĞ½Ñ‚

### AI-Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**  
AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹:
- Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ñ‚ĞµĞºÑÑ‚, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸  
- Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ°, EBITDA, ROE, Ñ€Ğ¾ÑÑ‚)  
- ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹ Ñ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ¾Ğ¼  
- Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ **ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ»Ñ BI Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸  

**Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ±Ğ¸Ğ·Ğ½ĞµÑÑƒ**
- ÑƒÑĞºĞ¾Ñ€ÑĞµÑ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² Ğ² **3â€“5 Ñ€Ğ°Ğ·**
- ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ Ğ½Ğ° Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ²
- Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡ĞµÑĞºĞ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
- Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´ Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
  
##  ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸
- âœ… ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² (PDF, Excel)
- âœ… Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ KPI Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ²Ğ¸Ğ´Ğµ
- âœ… Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ² (Vision API)
- âœ… Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ğ²Ñƒ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² (RAG)
- âœ… SQL-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
- âœ… Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² (Pydantic)
- âœ… REST API Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ² Ğ±Ğ¸Ğ·Ğ½ĞµÑ-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

---

##  Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Upload PDF/Excel
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI Endpoint          â”‚
â”‚   - Rate Limiting           â”‚
â”‚   - Input Validation        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FinancialAnalystAgent     â”‚
â”‚   (SmolAgents)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Tools:                    â”‚
â”‚   - PDF Parser              â”‚
â”‚   - Excel Parser            â”‚
â”‚   - Vision Analyzer         â”‚
â”‚   - FAISS Search            â”‚
â”‚   - Calculator              â”‚
â”‚   - SQL Generator (CodeAgent)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Structured Output         â”‚
â”‚   (Pydantic Validation)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent Workflow
```
1. Document Parsing
   â”œâ”€â”€ PDF: pdfplumber â†’ extract text, tables, images
   â””â”€â”€ Excel: openpyxl â†’ extract sheets, formulas

2. Semantic Search (FAISS)
   â””â”€â”€ Find similar reports in archive

3. Chart Analysis (Vision API)
   â”œâ”€â”€ Extract charts from document
   â”œâ”€â”€ Send to Claude Vision
   â”œâ”€â”€ Graceful degradation if API fails
   â””â”€â”€ Return structured ChartAnalysis

4. KPI Extraction (ToolCallingAgent)
   â”œâ”€â”€ Build extraction prompt
   â”œâ”€â”€ Use tools: search, calculate, SQL generate
   â”œâ”€â”€ Extract metrics from text/tables
   â””â”€â”€ Validate with Pydantic

5. Result Assembly
   â””â”€â”€ Create AnalysisResult with all data
```

---
##  Technology Stack

| Category | Technology |
|----------|-----------|
| **AI Framework** | SmolAgents (HuggingFace) |
| **LLM** | Claude 3.5 Sonnet (Anthropic) |
| **Vector DB** | FAISS (in-memory) |
| **Embeddings** | SentenceTransformers (multilingual) |
| **Vision** | Claude Vision API |
| **API** | FastAPI + Uvicorn |
| **Validation** | Pydantic v2 |
| **Logging** | Loguru |
| **Testing** | pytest + pytest-asyncio |
| **Containerization** | Docker + docker-compose |

---

##  Installation

### Prerequisites
- Python 3.11+
- Poetry (package manager)
- Docker & Docker Compose (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- Anthropic API key

### Quick Start (Local)

```bash
# 1. Clone repository
git clone https://github.com/yourusername/fintech-analyst-agent.git
cd fintech-analyst-agent

# 2. Install Poetry
curl -sSL https://install.python-poetry.org | python3 -

# 3. Install dependencies
poetry install

# 4. Setup environment
cp .env.example .env
# ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹ .env Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ ANTHROPIC_API_KEY

# 5. Run migrations (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ DB)
poetry run alembic upgrade head

# 6. Start API server
poetry run uvicorn src.api.main:app --reload

# 7. Open Swagger docs
open http://localhost:8000/docs
```

### Quick Start (Docker)

```bash
# 1. Clone & setup .env
git clone https://github.com/yourusername/fintech-analyst-agent.git
cd fintech-analyst-agent
cp .env.example .env
# Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ API keys Ğ² .env

# 2. Build & Run
docker-compose up --build

# 3. Access API
open http://localhost:8000/docs
```

---

##  Security

### Input Validation
- âœ… File size limits (10MB)
- âœ… File type whitelist (.pdf, .xlsx, .xls)
- âœ… Executable file detection
- âœ… SQL injection protection
- âœ… HTML/XSS sanitization

### API Security
- âœ… Rate limiting (10 requests/minute)
- âœ… CORS configuration
- âœ… Input sanitization
- âœ… Error message sanitization (no stack traces in production)

### Environment Variables
```bash
# Never commit .env file!
# Use .env.example as template
# Rotate API keys regularly
```
---

## ğŸ› Troubleshooting

### Common Issues

#### 1. "FAISS index not found"
```bash
# Create embeddings directory
mkdir -p data/embeddings

# Index will be created automatically on first use
```

#### 2. "Vision API error"
```bash
# Check API key
echo $ANTHROPIC_API_KEY

# Enable fallback mode
VISION_FALLBACK_ENABLED=True

# Check logs
tail -f logs/errors.log
```

#### 3. "Rate limit exceeded"
```bash
# Increase limit in .env
RATE_LIMIT_PER_MINUTE=20

# Or wait 1 minute
```

#### 4. Docker build fails
```bash
# Clear cache
docker-compose down
docker system prune -a

# Rebuild
docker-compose up --build
```
---

##  Performance

### Benchmarks (Ğ½Ğ° MacBook Pro M1, 16GB RAM)

| Task | Duration | Notes |
|------|----------|-------|
| PDF parsing (10 pages) | ~2s | pdfplumber |
| Chart analysis | ~3-5s | Claude Vision API |
| FAISS search (1000 docs) | ~50ms | In-memory |
| Full analysis | ~8-12s | End-to-end |

### Optimization Tips
- Use FAISS GPU version Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ embeddings Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- Batch processing Ğ´Ğ»Ñ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Redis Ğ´Ğ»Ñ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

---

##  Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT License â€” ÑĞ¼. [LICENSE](LICENSE)

---

<div align="center">

## ğŸ‘©â€ğŸ’» ĞĞ²Ñ‚Ğ¾Ñ€

**Ğ•Ğ»Ğ¸Ğ·Ğ°Ğ²ĞµÑ‚Ğ° ĞšĞµĞ²Ğ±Ñ€Ğ¸Ğ½Ğ°**

*Prompt Engineer â€¢ AI Engineer*

[![Email](https://img.shields.io/badge/Email-elisa.kevbrina%40yandex.ru-red?style=flat-square&logo=gmail)](mailto:elisa.kevbrina@yandex.ru)
[![GitHub](https://img.shields.io/badge/GitHub-%40LizaKevbrina-black?style=flat-square&logo=github)](https://github.com/LizaKevbrina)

---

**â­ Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ğ¾Ğ»ĞµĞ·ĞµĞ½, Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ·Ğ²ĞµĞ·Ğ´Ñƒ!**

*Made with â¤ï¸ for AI engineering community*

</div>
